# 1C Platform Tools

Расширение для Cursor с инструментами разработки для экосистемы 1С. Предоставляет удобный интерфейс для работы с проектами 1С через панель команд и дерево задач.

## Возможности

Все команды организованы по категориям и доступны через:

- Откройте панель "1C Platform Tools"
- Все команды доступны через дерево задач в нижней панели

### Палитра команд
- Все команды доступны через поиск в палитре команд

### Доступные команды

- **Информационные базы**
  - Создать пустую ИБ
  - Постобработка обновления
  - Запретить работу с внешними ресурсами
  - Выгрузить в dt / Загрузить из dt

- **Конфигурация**
  - Загрузить из src/cf (загрузка основной конфигурации из исходников)
  - Обновить из src/cf (обновление основной конфигурации из исходников которые указаны в файле build/commit/Commit.txt)
  - Загрузить из 1Cv8.cf
  - Выгрузить в src/cf (выгрузка основной конфигурации в исходники)
  - Выгрузить обновление в src/cf (выгрузка только изменений основной конфигурации в исходники)
  - Выгрузить в 1Cv8.cf
  - Выгрузить файл поставки в 1Cv8dist.cf
  - Собрать 1Cv8.cf из src/cf
  - Разобрать 1Cv8.cf в src/cf

- **Расширения**
  - Загрузить из src/cfe (загрузка всех расширений из исходников, расширения делятся на подкаталоги)
  - Загрузить из \*.cfe
  - Выгрузить в src/cfe (выгрузка всех расширений в исходники, расширения делятся на подкаталоги)
  - Выгрузить обновление в src/cfe (выгрузка только изменений всех расширений в исходники, расширения делятся на подкаталоги)
  - Обновить из src/cfe (обновление всех расширений из исходников которые указаны в файле build/commit/Commit.txt)
  - Выгрузить в \*.cfe
  - Собрать \*.cfe из src/cfe
  - Разобрать \*.cfe в src/cfe

- **Внешние файлы**
  - Собрать внешнюю обработку / внешний отчёт
  - Разобрать внешнюю обработку / внешний отчёт
  - Очистить кэш

- **Зависимости**
  - Инициализировать packagedef
  - Установить / Удалить зависимости

- **Запуск**
  - Запустить Предприятие
  - Запустить Конфигуратор

- **Задачи и конфигурации**
  - Задачи (workspace) — из tasks.json
  - Конфигурации запуска — env.json, launch.json

## Требования

- Cursor IDE
- Node.js версии 18.x или выше
- OneScript (oscript) - для выполнения скриптов. Ссылка https://oscript.io/

## Установка

- В переменных windows окружения создать переменную oscript (указать путь C:\Program Files\OneScript\bin\oscript.exe)

1. Откройте Cursor
2. Нажмите Ctrl+Shift+P - установка пакета vsix
3. Выберите файл
4. Закройте Cursor, откройте повторно
5. Ctrl+J - откроется панель с доступной вкладкой 1C Platform Tools


## Настройка

Расширение автоматически активируется при открытии проекта 1С (наличие файла `packagedef` в корне проекта).

Настройки доступны через в "1C Platform Tools" - "Конфигурации запуска". Параметры подключения к информационной базе настраиваются в файле `env.json` в корне проекта:

```json
{
  "default": {
    "--ibconnection": "/F./build/ib"
  }
}
```

## Структура проекта

Расширение опирается на структуру каталогов проекта [vanessa-bootstrap]

Рекомендуемая структура проекта:

```txt
project/
├── build/
│   ├── ib/                 # Информационная база
│   └── out/                # Собранные файлы
├── src/
│   ├── cf/                 # Исходники конфигурации
│   ├── cfe/                # Исходники расширений
│   ├── epf/                # Исходники внешних обработок
│   └── erf/                # Исходники внешних отчетов
├── oscript_modules/        # Зависимости oscript
├── env.json                # Настройки подключения к ИБ
└── packagedef              # Файл для активации расширения
```

## Важные нюансы

- Все команды выполняются в терминале Cursor для видимости вывода
- Параметр `--ibconnection` берется из `env.json` (секция `default['--ibconnection']`, по умолчанию `/F./build/ib`)
- Пути в настройках задаются относительно корня проекта или абсолютно; при вызове платформы 1С расширение подставляет итоговые абсолютные пути

## ВАЖНО
- за основу взят проект https://github.com/yellow-hammer/1c-platform-tools